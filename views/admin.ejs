<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Admin | Mobile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --gold: #D4AF37; --dark: #0b0e11; --panel: #1e2329; --border: #2b3139; --text: #eaecef; }
        
        body { background: var(--dark); color: var(--text); font-family: 'DINPro', sans-serif; margin: 0; padding: 20px; padding-bottom: 50px; }
        
        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
        .logo { color: var(--gold); font-size: 20px; font-weight: bold; text-decoration: none; }
        .logout { color: #f6465d; text-decoration: none; font-size: 13px; border: 1px solid #f6465d; padding: 6px 12px; border-radius: 4px; }

        .section-title { color: var(--gold); font-size: 16px; margin: 25px 0 15px 0; display: flex; align-items: center; gap: 8px; }
        
        /* CARDS CONTAINER */
        .card-stack { display: flex; flex-direction: column; gap: 15px; }
        
        /* GENERIC CARD STYLE */
        .card { background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 15px; }
        
        /* USER ROWS */
        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 13px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px; }
        .info-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .label { color: #848e9c; }
        .val { font-weight: bold; color: white; text-align: right; }
        
        .status-badge { padding: 2px 6px; border-radius: 3px; font-size: 10px; font-weight: bold; text-transform: uppercase; }
        .online { background: rgba(14, 203, 129, 0.15); color: #0ecb81; }
        .offline { background: rgba(132, 142, 156, 0.15); color: #848e9c; }

        /* TX SPECIFIC */
        .tx-card.pending { border-left: 3px solid #f0b90b; }
        .tx-card.approved { border-left: 3px solid #0ecb81; }
        .tx-card.rejected { border-left: 3px solid #f6465d; }
        
        .btn-group { display: flex; gap: 10px; margin-top: 15px; }
        .btn { flex: 1; padding: 10px; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; color: white; }
        .approve { background: #0ecb81; }
        .reject { background: #f6465d; }
        
        @media (min-width: 768px) {
            .card-stack { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        }
    </style>
</head>
<body>

    <div class="header">
        <a href="#" class="logo">NOVA ADMIN</a>
        <a href="/logout" class="logout">Logout</a>
    </div>

    <div class="section-title"><i class="fas fa-users"></i> Clients</div>
    
    <div class="card-stack">
        <% let count = 0; %>
        <% users.forEach(u => { %>
            <% if(!u.email.includes('@nova.com')) { count++; %>
            <div class="card">
                <div class="info-row"><span class="label">Name</span><span class="val"><%= u.name %></span></div>
                <div class="info-row"><span class="label">Email</span><span class="val"><%= u.email %></span></div>
                <div class="info-row"><span class="label">Balance</span><span class="val" style="color:#0ecb81;">$<%= u.balance.toFixed(2) %></span></div>
                <div class="info-row"><span class="label">Status</span><span class="val status-badge <%= u.isOnline ? 'online' : 'offline' %>"><%= u.isOnline ? 'Active' : 'Offline' %></span></div>
            </div>
            <% } %>
        <% }) %>
        
        <% if(count === 0) { %>
            <div style="padding: 20px; text-align: center; color: #666; font-style: italic; background: #161a1e; border-radius: 8px;">
                No clients found. Waiting for signups...
            </div>
        <% } %>
    </div>

    <div class="section-title"><i class="fas fa-exchange-alt"></i> Requests</div>
    
    <div class="card-stack">
        <% if(transactions.length === 0) { %>
            <div style="padding: 20px; text-align: center; color: #666; font-style: italic; background: #161a1e; border-radius: 8px;">
                No pending requests.
            </div>
        <% } %>

        <% transactions.forEach(t => { %>
            <div class="card tx-card <%= t.status %>">
                <div class="info-row"><span class="label">Type</span><span class="val" style="text-transform:uppercase;"><%= t.type %></span></div>
                <div class="info-row"><span class="label">Amount</span><span class="val" style="color:var(--gold); font-size:16px;">$<%= t.amount.toFixed(2) %></span></div>
                <div class="info-row"><span class="label">Method</span><span class="val"><%= t.method %></span></div>
                <div class="info-row"><span class="label">Status</span><span class="val"><%= t.status %></span></div>
                
                <% if(t.status === 'pending') { %>
                <div class="btn-group">
                    <form action="/admin/approve" method="POST" style="flex:1; margin:0;"><input type="hidden" name="userId" value="<%= t.userId %>"><input type="hidden" name="amount" value="<%= t.amount %>"><button class="btn approve">Approve</button></form>
                    <form action="/admin/reject" method="POST" style="flex:1; margin:0;"><input type="hidden" name="userId" value="<%= t.userId %>"><input type="hidden" name="amount" value="<%= t.amount %>"><button class="btn reject">Reject</button></form>
                </div>
                <% } %>
            </div>
        <% }) %>
    </div>

</body>
</html>